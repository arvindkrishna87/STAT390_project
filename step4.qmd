---
title: "Step 4: Patching"
editor: 
  markdown: 
    wrap: 72
--- 


**Aim: Applies horizontal/vertical patching across the matched and
oriented epithelia.**

![](images/Step4.png){fig-align="center"}

# Steps Before Patching

**1. Pathologist Team Annotations**

Before this step, we will send matched and extracted epithelium slices
to the **pathologist team** to annotate the regions.

![](images/Annotations.png){fig-align="center"}

**2. Orientation**

After this we will orient the images to be aligned evenly before
patching.

![](images/Orient.png){fig-align="center"}

Once these steps are complete, we can begin patching.

# Methodology


The methodology for segmenting and analyzing epithelium regions in tissue images involves a structured series of image processing steps. Initially, each image is converted to grayscale and smoothed using a Gaussian blur to reduce noise and enhance uniformity. A binary mask is then generated through thresholding, followed by morphological operations such as closing and opening to refine the mask and remove small artifacts. The largest contour is identified as the epithelium region, and its mask is saved for further analysis. To segment the epithelium into patches, optimal patch dimensions are calculated based on the maximum continuous width of white pixels and the total epithelium area. Patches are applied using a stride that ensures coverage while minimizing overlap, and both vertical and horizontal orientations are evaluated to determine the best coverage for each region. The combined patches are drawn on the original image, and coverage percentages are calculated. Additionally, region outlines are overlaid on the images for visualization. The final outputs include the processed images with patches, region outlines, and masks, ensuring comprehensive segmentation and coverage assessment.


Follow this step-by-step manual to patch the epithelium:

:::{.callout-note collapse=true}

## Step-by-Step Manual

**Directories:**

Defines input_folder (where processed images are stored) and
output_folder (where the results will be saved).

**Directory structure:**

Images: `Step 4/ Processed_images_sub`

Filtered_images: `epithelium_patches_6_hori.py`


1.  Place all desired sample images in “filtered_images” folder

2.  Open and run `epithelium_patches_6_hori.py`. Dependencies include
    cv2, numpy, os

3.  Find processed images in `processed_images_sub`

:::

# Results

![](images/Step4.png){fig-align="center"}


