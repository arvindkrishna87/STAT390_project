---
title: "Step 4: Patching"
editor: 
  markdown: 
    wrap: 72
--- 


**Aim: Applies horizontal/vertical patching across the matched and
oriented epithelia.**

![](images/Step4.png){fig-align="center"}

# ** Steps Before Patching **

### 1. Pathologist Team Annotations

Before this step, we will send matched and extracted epithelium slices
to the **pathologist team** to annotate the regions.

![](images/Annotations.png){fig-align="center"}

### 2. Orientation

After this we will orient the images to be aligned evenly before
patching.

![](images/Orient.png){fig-align="center"}

Once these steps are complete, we can begin patching.

# **Methodology**

Patching algorithm calculates the optimal patch height and width based
on the epithelium mask. The patch dimensions are based on the maximum
continuous width of white pixels (i.e., the epithelium area) and the
overall epithelium area in the mask. The patches are used to analyze and
visualize the epithelium coverage, and they are placed on the images
based on optimal patch dimensions and overlap calculations. Patching
algorithm takes in processed images of the epithelium from the stained
cells and applies a sliding kernel across the image The optimal patch
height is the maximum width of continuous white pixels (in each row),
with a minimum height of 100. The patch width is calculated by dividing
the epithelium area by 100 and the optimal patch height.




:::{.callout-note collapse=true}

## Step-by-Step Manual

**Directories:**

Defines input_folder (where processed images are stored) and
output_folder (where the results will be saved).

**Directory structure:**

Images: `Step 4/ Processed_images_sub`

Filtered_images: `epithelium_patches_6_hori.py`


1.  Place all desired sample images in “filtered_images” folder

2.  Open and run `epithelium_patches_6_hori.py`. Dependencies include
    cv2, numpy, os

3.  Find processed images in `processed_images_sub`

:::

# Results

![](images/Step4.png){fig-align="center"}


